import React, { useState } from 'react';\nimport { Card, CardHeader, CardTitle, CardContent } from './ui/card';\nimport { Button } from './ui/button';\nimport { Input } from './ui/input';\nimport { Label } from './ui/label';\nimport { UserPlus, LogIn, X, Eye, EyeOff } from 'lucide-react';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst AuthModal = ({ isOpen, onClose, defaultMode = 'login' }) => {\n  const [mode, setMode] = useState(defaultMode); // 'login' or 'register'\n  const [showPassword, setShowPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [formData, setFormData] = useState({\n    username: '',\n    email: '',\n    full_name: '',\n    password: '',\n    confirmPassword: '',\n    is_coach: false\n  });\n\n  const { login, register } = useAuth();\n\n  const handleInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n    setError(''); // Clear error when user types\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      if (mode === 'login') {\n        const result = await login(formData.username, formData.password);\n        if (result.success) {\n          onClose();\n        } else {\n          setError(result.error);\n        }\n      } else {\n        // Registration validation\n        if (formData.password !== formData.confirmPassword) {\n          setError('Passwords do not match');\n          setLoading(false);\n          return;\n        }\n        if (formData.password.length < 6) {\n          setError('Password must be at least 6 characters');\n          setLoading(false);\n          return;\n        }\n\n        const result = await register({\n          username: formData.username,\n          email: formData.email,\n          full_name: formData.full_name,\n          password: formData.password,\n          is_coach: formData.is_coach\n        });\n\n        if (result.success) {\n          onClose();\n        } else {\n          setError(result.error);\n        }\n      }\n    } catch (err) {\n      setError('An unexpected error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const switchMode = () => {\n    setMode(mode === 'login' ? 'register' : 'login');\n    setError('');\n    setFormData({\n      username: '',\n      email: '',\n      full_name: '',\n      password: '',\n      confirmPassword: '',\n      is_coach: false\n    });\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"relative\">\n          <button\n            onClick={onClose}\n            className=\"absolute right-4 top-4 text-gray-400 hover:text-gray-600\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n          <CardTitle className=\"flex items-center gap-2\">\n            {mode === 'login' ? (\n              <>\n                <LogIn className=\"w-5 h-5\" />\n                Login to Your Account\n              </>\n            ) : (\n              <>\n                <UserPlus className=\"w-5 h-5\" />\n                Create New Account\n              </>\n            )}\n          </CardTitle>\n        </CardHeader>\n        \n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {error && (\n              <div className=\"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md\">\n                {error}\n              </div>\n            )}\n\n            <div>\n              <Label htmlFor=\"username\">Username</Label>\n              <Input\n                id=\"username\"\n                name=\"username\"\n                type=\"text\"\n                required\n                value={formData.username}\n                onChange={handleInputChange}\n                placeholder=\"Enter your username\"\n              />\n            </div>\n\n            {mode === 'register' && (\n              <>\n                <div>\n                  <Label htmlFor=\"email\">Email</Label>\n                  <Input\n                    id=\"email\"\n                    name=\"email\"\n                    type=\"email\"\n                    required\n                    value={formData.email}\n                    onChange={handleInputChange}\n                    placeholder=\"Enter your email\"\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"full_name\">Full Name</Label>\n                  <Input\n                    id=\"full_name\"\n                    name=\"full_name\"\n                    type=\"text\"\n                    required\n                    value={formData.full_name}\n                    onChange={handleInputChange}\n                    placeholder=\"Enter your full name\"\n                  />\n                </div>\n              </>\n            )}\n\n            <div>\n              <Label htmlFor=\"password\">Password</Label>\n              <div className=\"relative\">\n                <Input\n                  id=\"password\"\n                  name=\"password\"\n                  type={showPassword ? 'text' : 'password'}\n                  required\n                  value={formData.password}\n                  onChange={handleInputChange}\n                  placeholder=\"Enter your password\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n                >\n                  {showPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                </button>\n              </div>\n            </div>\n\n            {mode === 'register' && (\n              <>\n                <div>\n                  <Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n                  <Input\n                    id=\"confirmPassword\"\n                    name=\"confirmPassword\"\n                    type={showPassword ? 'text' : 'password'}\n                    required\n                    value={formData.confirmPassword}\n                    onChange={handleInputChange}\n                    placeholder=\"Confirm your password\"\n                  />\n                </div>\n\n                <div className=\"flex items-center space-x-2\">\n                  <input\n                    id=\"is_coach\"\n                    name=\"is_coach\"\n                    type=\"checkbox\"\n                    checked={formData.is_coach}\n                    onChange={handleInputChange}\n                    className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                  />\n                  <Label htmlFor=\"is_coach\" className=\"text-sm\">\n                    I am a coach or training professional\n                  </Label>\n                </div>\n              </>\n            )}\n\n            <Button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full\"\n            >\n              {loading ? (\n                'Loading...'\n              ) : mode === 'login' ? (\n                'Login'\n              ) : (\n                'Create Account'\n              )}\n            </Button>\n          </form>\n\n          <div className=\"mt-4 text-center\">\n            <button\n              onClick={switchMode}\n              className=\"text-sm text-blue-600 hover:text-blue-800 underline\"\n            >\n              {mode === 'login' ? (\n                \"Don't have an account? Register here\"\n              ) : (\n                'Already have an account? Login here'\n              )}\n            </button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default AuthModal;"